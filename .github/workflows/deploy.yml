# è¿™æ˜¯ä¸€ä¸ªåŸºæœ¬çš„å·¥ä½œæµï¼Œå¯ä»¥å¸®åŠ©æ‚¨å¼€å§‹æ“ä½œ

name: Deploy to Gitee

# æ§åˆ¶æ“ä½œä½•æ—¶è¿è¡Œ
on:
  # è§¦å‘æ¨é€æˆ–æ‹‰é€è¯·æ±‚äº‹ä»¶çš„å·¥ä½œæµï¼Œä½†ä»…é’ˆå¯¹ä¸»åˆ†æ”¯
  push:
    branches: [main]

# å·¥ä½œæµè¿è¡Œç”±ä¸€ä¸ªæˆ–å¤šä¸ªå¯ä»¥é¡ºåºæˆ–å¹¶è¡Œè¿è¡Œçš„ä½œä¸šç»„æˆ
jobs:
  # æ­¤å·¥ä½œæµåŒ…å«ä¸€ä¸ªåä¸ºâ€œ build â€çš„ä½œä¸š
  deploy:
    # ä½œä¸šå°†åœ¨å…¶ä¸Šè¿è¡Œçš„è¿è¡Œç¨‹åºçš„ç±»å‹
    runs-on: ubuntu-latest

    # steps è¡¨ç¤ºå°†ä½œä¸ºä½œä¸šçš„ä¸€éƒ¨åˆ†æ‰§è¡Œçš„ä»»åŠ¡åºåˆ—
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Install pnpm
        uses: pnpm/action-setup@v2
        with:
          version: 6

      - name: Set node version to 16.x
        uses: actions/setup-node@v3
        with:
          node-version: 16.x
          registry-url: https://registry.npmjs.org/
          cache: "pnpm"

      # ä½¿ç”¨ runners shell è¿è¡Œä¸€ç»„å‘½ä»¤
      - name: Install and Build ğŸ”§
        run: |
          pnpm install
          pnpm build
      - name: Deploy ğŸš€
        uses: JamesIves/github-pages-deploy-action@releases/v3
        with:
          GITHUB_TOKEN: ${{ secrets.SECRET_GITHUB_TOKEN }}
          BRANCH: gh-pages
          FOLDER: docs/.vitepress/dist

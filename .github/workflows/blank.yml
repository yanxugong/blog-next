# è¿™æ˜¯ä¸€ä¸ªåŸºæœ¬çš„å·¥ä½œæµï¼Œå¯ä»¥å¸®åŠ©æ‚¨å¼€å§‹æ“ä½œ

name: CI

# æ§åˆ¶æ“ä½œä½•æ—¶è¿è¡Œ
on:
  # è§¦å‘æ¨é€æˆ–æ‹‰é€è¯·æ±‚äº‹ä»¶çš„å·¥ä½œæµï¼Œä½†ä»…é’ˆå¯¹ä¸»åˆ†æ”¯
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

  # å…è®¸æ‚¨ä»â€œæ“ä½œâ€é€‰é¡¹å¡æ‰‹åŠ¨è¿è¡Œæ­¤å·¥ä½œæµ
  workflow_dispatch:

# å·¥ä½œæµè¿è¡Œç”±ä¸€ä¸ªæˆ–å¤šä¸ªå¯ä»¥é¡ºåºæˆ–å¹¶è¡Œè¿è¡Œçš„ä½œä¸šç»„æˆ
jobs:
  # æ­¤å·¥ä½œæµåŒ…å«ä¸€ä¸ªåä¸ºâ€œ build â€çš„ä½œä¸š
  build:
    # ä½œä¸šå°†åœ¨å…¶ä¸Šè¿è¡Œçš„è¿è¡Œç¨‹åºçš„ç±»å‹
    runs-on: ubuntu-latest

    # steps è¡¨ç¤ºå°†ä½œä¸ºä½œä¸šçš„ä¸€éƒ¨åˆ†æ‰§è¡Œçš„ä»»åŠ¡åºåˆ—
    steps:
      # åœ¨ $GITHUB_WORKSPACE ä¸‹ç­¾å‡ºæ‚¨çš„å­˜å‚¨åº“ï¼Œä»¥ä¾¿æ‚¨çš„ä½œä¸šå¯ä»¥è®¿é—®å®ƒ
      - uses: actions/checkout@v2

      # ä½¿ç”¨ runners shell è¿è¡Œå•ä¸ªå‘½ä»¤
      # - name: Run a one-line script
      #   run: echo Hello, world!

      # ä½¿ç”¨ runners shell è¿è¡Œä¸€ç»„å‘½ä»¤
      - name: Install and Build ğŸ”§
        run: |
          npm install
          npm run build
      - name: Deploy ğŸš€
        uses: JamesIves/github-pages-deploy-action@releases/v3
        with:
          GITHUB_TOKEN: ${{ secrets.SECRET_GITHUB_TOKEN }}
          BRANCH: gh-pages
          FOLDER: docs/.vitepress/dist

<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>「工程化」如何看待构建工具 Vite？ | Yanxu Gong's Blog</title>
    <meta name="description" content="Personal blog based on Github Action + VitePress">
    <link rel="stylesheet" href="/blog-next/assets/style.88a1b92e.css">
    <link rel="modulepreload" href="/blog-next/assets/chunks/AlgoliaSearchBox.dd75b3aa.js">
    <link rel="modulepreload" href="/blog-next/assets/app.acdedced.js">
    <link rel="modulepreload" href="/blog-next/assets/study_engineering_vite.md.a5e68948.lean.js">
    
    <link rel="icon" type="image/svg+xml" href="/logo.svg">
  <meta name="twitter:title" content="「工程化」如何看待构建工具 Vite？ | Yanxu Gong&#39;s Blog">
  <meta property="og:title" content="「工程化」如何看待构建工具 Vite？ | Yanxu Gong&#39;s Blog">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-95cd145e><div class="sidebar-button" data-v-95cd145e><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/blog-next/" aria-label="Yanxu Gong&#39;s Blog, back to home" data-v-95cd145e data-v-2627e0f1><img class="logo" src="/blog-next/logo.svg" alt="Logo" data-v-2627e0f1> Yanxu Gong&#39;s Blog</a><div class="flex-grow" data-v-95cd145e></div><div class="nav" data-v-95cd145e><nav class="nav-links" data-v-95cd145e data-v-b68e4bf6><!--[--><div class="item" data-v-b68e4bf6><div class="nav-link" data-v-b68e4bf6 data-v-43e5dab6><a class="item active" href="/blog-next/study/" data-v-43e5dab6>学习 <!----></a></div></div><div class="item" data-v-b68e4bf6><div class="nav-link" data-v-b68e4bf6 data-v-43e5dab6><a class="item" href="/blog-next/photography/" data-v-43e5dab6>摄影 <!----></a></div></div><div class="item" data-v-b68e4bf6><div class="nav-link" data-v-b68e4bf6 data-v-43e5dab6><a class="item" href="/blog-next/emotion/" data-v-43e5dab6>情感 <!----></a></div></div><div class="item" data-v-b68e4bf6><div class="nav-link" data-v-b68e4bf6 data-v-43e5dab6><a class="item" href="/blog-next/about/" data-v-43e5dab6>关于 <!----></a></div></div><!--]--><!----><div class="item" data-v-b68e4bf6><div class="nav-link" data-v-b68e4bf6 data-v-43e5dab6><a class="item isExternal" href="https://github.com/yanxugong/blog-next" target="_blank" rel="noopener noreferrer" data-v-43e5dab6>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-43e5dab6><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav></div><!--[--><!--[--><div class="algolia-search-box" id="docsearch"></div><!--]--><!--]--></header><aside class="sidebar" data-v-1c2cc348><nav class="nav-links nav" data-v-1c2cc348 data-v-b68e4bf6><!--[--><div class="item" data-v-b68e4bf6><div class="nav-link" data-v-b68e4bf6 data-v-43e5dab6><a class="item active" href="/blog-next/study/" data-v-43e5dab6>学习 <!----></a></div></div><div class="item" data-v-b68e4bf6><div class="nav-link" data-v-b68e4bf6 data-v-43e5dab6><a class="item" href="/blog-next/photography/" data-v-43e5dab6>摄影 <!----></a></div></div><div class="item" data-v-b68e4bf6><div class="nav-link" data-v-b68e4bf6 data-v-43e5dab6><a class="item" href="/blog-next/emotion/" data-v-43e5dab6>情感 <!----></a></div></div><div class="item" data-v-b68e4bf6><div class="nav-link" data-v-b68e4bf6 data-v-43e5dab6><a class="item" href="/blog-next/about/" data-v-43e5dab6>关于 <!----></a></div></div><!--]--><!----><div class="item" data-v-b68e4bf6><div class="nav-link" data-v-b68e4bf6 data-v-43e5dab6><a class="item isExternal" href="https://github.com/yanxugong/blog-next" target="_blank" rel="noopener noreferrer" data-v-43e5dab6>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-43e5dab6><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav><!--[--><!--]--><ul class="sidebar-links" data-v-1c2cc348><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="#一、vite-是什么？">一、Vite 是什么？</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#二、vite-怎么玩？">二、Vite 怎么玩？</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#三、vite-为什么快？">三、Vite 为什么快？</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#_3-1-极速的服务启动">3.1 极速的服务启动</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_3-2-轻量快速的热重载">3.2 轻量快速的热重载</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#四、什么是-esbuild？">四、什么是 esbuild？</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#_4-1-官网描述">4.1 官网描述</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_4-2-主要特点">4.2 主要特点</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_4-3-存在的问题">4.3 存在的问题</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#五、未来构建工具展望">五、未来构建工具展望</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#六、感谢">六、感谢</a><!----></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-3d00e640><div class="container" data-v-3d00e640><!--[--><!--]--><div style="position:relative;" class="content" data-v-3d00e640><div><h1 id="「工程化」如何看待构建工具-vite？" tabindex="-1">「工程化」如何看待构建工具 Vite？ <a class="header-anchor" href="#「工程化」如何看待构建工具-vite？" aria-hidden="true">#</a></h1><h2 id="一、vite-是什么？" tabindex="-1">一、Vite 是什么？ <a class="header-anchor" href="#一、vite-是什么？" aria-hidden="true">#</a></h2><p>Vite（法语意为“迅速”，发音/vit/）是一种全新的前端构建工具。你可以把它理解为一个开箱即用的<strong>开发服务器</strong> + <strong>打包工具</strong>的组合，但是更轻更快。 Vite 利用浏览器原生的 ES 模块支持和用编译到原生的语言开发的工具（如 esbuild）来提供一个快速且现代的开发体验。</p><h2 id="二、vite-怎么玩？" tabindex="-1">二、Vite 怎么玩？ <a class="header-anchor" href="#二、vite-怎么玩？" aria-hidden="true">#</a></h2><blockquote><p><strong>兼容性注意</strong></p><p>Vite 需要 Node.js 版本 &gt;= 12.0.0。</p></blockquote><p>使用 NPM：</p><div class="language-js"><pre><code>npm init @vitejs<span class="token operator">/</span>app
</code></pre></div><p>使用 Yarn：</p><div class="language-js"><pre><code>yarn init @vitejs<span class="token operator">/</span>app
</code></pre></div><p>这里我选择了默认项目名称、 <code>vue-ts</code> 模板（这里 Vue 版本为 3.0 ），然后按照提示，下一步下一步即可，如下图：</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/74830bca33b74d3c84809ef1d60a7b93~tplv-k3u1fbpfcp-watermark.image" alt=""></p><p>项目目录如下图：</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8fbe78caa8f5471bb5c8e25c61dcfd6d~tplv-k3u1fbpfcp-watermark.image" alt=""></p><p>输入指令，秒启动：</p><div class="language-js"><pre><code>cd vite<span class="token operator">-</span>project
npm install
npm run dev
</code></pre></div><p>大家也跑起来玩一下吧。😂</p><h2 id="三、vite-为什么快？" tabindex="-1">三、Vite 为什么快？ <a class="header-anchor" href="#三、vite-为什么快？" aria-hidden="true">#</a></h2><h3 id="_3-1-极速的服务启动" tabindex="-1">3.1 极速的服务启动 <a class="header-anchor" href="#_3-1-极速的服务启动" aria-hidden="true">#</a></h3><p>Vite 使用 <a href="https://esbuild.github.io/" target="_blank" rel="noopener noreferrer">esbuild</a> 预构建<strong>依赖</strong>，以原生 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules" target="_blank" rel="noopener noreferrer">ESM</a> 方式服务<strong>源码</strong>。</p><p>Vite 将有许多内部模块的 ESM 依赖关系转换为单个模块，以提高后续页面加载性能。例如，我们从同一个模块引入多个单独的文件 <code>import { debounce } from &#39;lodash-es&#39;</code> 时，Vite 会通过预构建 <code>lodash-es</code>（内置模块较多） 成一个模块，<strong>避免</strong>大量请求在浏览器造成<strong>网络阻塞</strong>。</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/832c27e603704861ad243caaf795bd15~tplv-k3u1fbpfcp-watermark.image" alt=""></p><p>Esbuild 使用 Go 编写，比 JavaScript 编写的打包器预构建依赖快 10-100 倍。</p><p>Vite 只在浏览器请求源码时进行转换并<strong>按需</strong>提供源码。<strong>动态导入</strong>的代码，只在当前屏幕上实际使用时才会被处理。</p><h3 id="_3-2-轻量快速的热重载" tabindex="-1">3.2 轻量快速的热重载 <a class="header-anchor" href="#_3-2-轻量快速的热重载" aria-hidden="true">#</a></h3><blockquote><p><strong>注意</strong></p><p>手动 HMR API 主要用于框架和工具作者。作为最终用户，HMR 可能已经在特定于框架的启动器模板中为你处理过了。</p></blockquote><p>Vite 提供了一套原生 ESM 的 <a href="https://cn.vitejs.dev/guide/api-hmr.html" target="_blank" rel="noopener noreferrer">HMR API</a>。 具有 HMR 功能的框架可以利用该 API 提供即时、准确的更新，而无需重新加载页面或删除应用程序状态。</p><h2 id="四、什么是-esbuild？" tabindex="-1">四、什么是 esbuild？ <a class="header-anchor" href="#四、什么是-esbuild？" aria-hidden="true">#</a></h2><h3 id="_4-1-官网描述" tabindex="-1">4.1 官网描述 <a class="header-anchor" href="#_4-1-官网描述" aria-hidden="true">#</a></h3><p>一个极速 JavaScript 打包工具。</p><h3 id="_4-2-主要特点" tabindex="-1">4.2 主要特点 <a class="header-anchor" href="#_4-2-主要特点" aria-hidden="true">#</a></h3><ul><li>极快的速度，无需缓存</li><li>ES6 和 CommonJS 模块</li><li>ES6 模块的 Tree shaking</li><li>适用于 JavaScript 和 Go 的 API</li><li>TypeScript 和 JSX 语法</li><li>Source maps</li><li>压缩</li><li>Plugins</li></ul><h3 id="_4-3-存在的问题" tabindex="-1">4.3 存在的问题 <a class="header-anchor" href="#_4-3-存在的问题" aria-hidden="true">#</a></h3><ul><li>调试麻烦</li></ul><p>esbuild 的核心代码是用 golang 编写，用户使用的直接是编译出来的 binary 代码和一堆 js 代码，binary 代码几乎没法断点调试，每次调试 esbuild 的代码，需要拉下代码重新编译调试，调试要求较高，难度较大。</p><ul><li>只支持 es6</li></ul><p>目前国内大部分都仍然需要考虑 es5 场景，因此并不能将 esbuild 的产物作为最终产物，通常需要做 es6 到 es5 的转换。</p><blockquote><p>WebAssembly 也叫 WASM，它是为基于栈的虚拟机设计的二进制指令格式，WASM 作为可移植目标，用于编译高级语言（如 C/C++/Rust），从而可以在 Web 上部署高性能客户端和服务器应用，同时它也可以在许多其它环境中使用。</p></blockquote><blockquote><p>WebAssembly 描述了一种内存安全的沙箱执行环境，该环境甚至可以在现有 JavaScript 虚拟机内部实现。当嵌入到 Web 中时，WebAssembly 将强制执行浏览器的同源和权限安全策略。</p></blockquote><ul><li>golang wasm 的性能相比 native 有较大的损耗，且 wasm 包体积较大，</li></ul><p>目前 golang 编译出的 wasm 性能并不是很好（相比于 native 有 3-5 倍的性能衰减），并且 go 编译出来 wasm 包体积较大( 8M+ )，不太适合一些对包体积敏感的场景（比如生产环境）。</p><ul><li>插件机制缺失</li></ul><h2 id="五、未来构建工具展望" tabindex="-1">五、未来构建工具展望 <a class="header-anchor" href="#五、未来构建工具展望" aria-hidden="true">#</a></h2><p>相信玩过 Vite 的同学们都被它的<strong>首次启动秒开</strong>，<strong>极速热启动</strong>等等优势深深的吸引到了。个人感觉这个方向还是非常潜力的。</p><p>前端玩具层出不穷，敢问路在何方？</p><p>种一棵树最好的时间是十年前，其次是<strong>现在</strong>。一起玩一玩 Vite 吧。</p><h2 id="六、感谢" tabindex="-1">六、感谢 <a class="header-anchor" href="#六、感谢" aria-hidden="true">#</a></h2><ul><li>如果这篇文章对你有帮助，就点个赞支持下吧！感谢阅读。</li></ul></div></div><footer class="page-footer" data-v-3d00e640 data-v-0d8328fe><div class="edit" data-v-0d8328fe><div class="edit-link" data-v-0d8328fe data-v-f484245e><a class="link" href="https://github.com/yanxugong/blog-next/edit/main/study/engineering/vite.md" target="_blank" rel="noopener noreferrer" data-v-f484245e>为此页提供修改建议 <svg class="icon outbound icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-f484245e><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="updated" data-v-0d8328fe><!----></div></footer><!----><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"about_index.md\":\"c8fb677e\",\"emotion_index.md\":\"9df12840\",\"index.md\":\"122593cd\",\"photography_index.md\":\"8ab54a43\",\"study_algorithm_handwriting-js-one.md\":\"663b0369\",\"study_algorithm_handwriting-js-two.md\":\"89ddc858\",\"study_algorithm_linked-list.md\":\"56de5a22\",\"study_engineering_vite.md\":\"a5e68948\",\"study_engineering_webpack-hmr.md\":\"fd9d7b24\",\"study_engineering_webpack-loader.md\":\"c44e1d7e\",\"study_engineering_webpack-main.md\":\"c92b7e90\",\"study_engineering_webpack-plugin.md\":\"b64db039\",\"study_frame_deep-react-one.md\":\"9567db07\",\"study_frame_deep-react-two.md\":\"647e3106\",\"study_index.md\":\"d0d78b09\",\"study_js-basis_implementation-mechanism.md\":\"5724d96f\",\"study_js-basis_prototype-and-prototype-chain.md\":\"dffe13ab\",\"study_js-basis_scope-and-closure.md\":\"128bae09\",\"study_js-basis_syntax-and-api.md\":\"53be698c\",\"study_js-basis_variables-and-types.md\":\"9fcfaf7a\",\"study_js-basis_you-do-not-konw-js-down.md\":\"96afbde7\",\"study_js-basis_you-do-not-konw-js.md\":\"646fef6b\",\"study_network_from-url-to-page-render.md\":\"ffd09749\",\"study_performance-optimization_first-screen.md\":\"0aa2c624\",\"study_server_go-getting-started.md\":\"ce44aeeb\",\"study_vue3_responsive-system.md\":\"f0bff472\"}")</script>
    <script type="module" async src="/blog-next/assets/app.acdedced.js"></script>
    
  </body>
</html>